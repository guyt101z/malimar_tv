<div class="content" style='margin-top: 10px'>
	<div class="container">
    	<div class="mlr90">
            <div class='row'>
                <div class='col-md-12'>
					<%= form_tag update_profile_path, remote: true, id: 'update_profile_form' do %>
                    <div class="panel-default panel">
						<div class='panel-heading'>
                        	<h4 class="panel-title name">My Profile Info</h4>
						</div>
						<div class='panel-body'>
							<div class='row' style='margin:0' id='user_profile'>
								<div class="row">
									<div class="col-sm-3">
										<div class="form-group">
											<label>First Name</label>
											<%= text_field_tag :first_name, current_user.first_name, class: 'form-control' %>
										</div>
									</div>
									<div class="col-sm-3">
										<div class="form-group">
											<label>Last Name</label>
											<%= text_field_tag :last_name, current_user.last_name, class: 'form-control' %>
										</div>
									</div>
									<div class="col-sm-6">
										<div class="form-group">
											<label>Username / Email</label>
											<%= text_field_tag :email, current_user.email, class: 'form-control' %>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-4">
										<div class="form-group">
											<label>Home Phone</label>
											<%= text_field_tag :phone_1, current_user.phone_1, class: 'form-control' %>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label>Mobile Phone</label>
											<%= text_field_tag :phone_2, current_user.phone_2, class: 'form-control', placeholder: 'Optional' %>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label>Business Phone</label>
											<%= text_field_tag :phone_3, current_user.phone_3, class: 'form-control', placeholder: 'Optional' %>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<label>Street Address</label>
											<%= text_field_tag :address_1, current_user.address_1, class: 'form-control' %>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<label>Street Address 2</label>
											<%= text_field_tag :address_2, current_user.address_2, class: 'form-control', placeholder: 'Optional' %>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-6">
										<div class="row">
											<div class="col-sm-6">
												<div class="form-group">
													<label>City</label>
													<%= text_field_tag :city, current_user.city, class: 'form-control' %>
												</div>
											</div>
											<div class="col-sm-6">
												<div class="form-group">
													<label>State / Province</label>
													<% provinces = [['Alberta','AB'],['British Columbia','BC'],['Manitoba','MN'],['New Brunswick','NB'], ['Newfoundland','NF'], ['Nova Scotia','NS'],['North West Territories','NT'],
													['Nunavut','NU'],['Ontario','ON'],['PEI','PEI'],['QuÃ©bec','QC'],['Saskatchewan','SK'],['Yukon','YK']] %>
													<% states = [
													['Alabama', 'AL'],
													['Alaska', 'AK'],
													['Arizona', 'AZ'],
													['Arkansas', 'AR'],
													['California', 'CA'],
													['Colorado', 'CO'],
													['Connecticut', 'CT'],
													['Delaware', 'DE'],
													['District of Columbia', 'DC'],
													['Florida', 'FL'],
													['Georgia', 'GA'],
													['Hawaii', 'HI'],
													['Idaho', 'ID'],
													['Illinois', 'IL'],
													['Indiana', 'IN'],
													['Iowa', 'IA'],
													['Kansas', 'KS'],
													['Kentucky', 'KY'],
													['Louisiana', 'LA'],
													['Maine', 'ME'],
													['Maryland', 'MD'],
													['Massachusetts', 'MA'],
													['Michigan', 'MI'],
													['Minnesota', 'MN'],
													['Mississippi', 'MS'],
													['Missouri', 'MO'],
													['Montana', 'MT'],
													['Nebraska', 'NE'],
													['Nevada', 'NV'],
													['New Hampshire', 'NH'],
													['New Jersey', 'NJ'],
													['New Mexico', 'NM'],
													['New York', 'NY'],
													['North Carolina', 'NC'],
													['North Dakota', 'ND'],
													['Ohio', 'OH'],
													['Oklahoma', 'OK'],
													['Oregon', 'OR'],
													['Pennsylvania', 'PA'],
													['Puerto Rico', 'PR'],
													['Rhode Island', 'RI'],
													['South Carolina', 'SC'],
													['South Dakota', 'SD'],
													['Tennessee', 'TN'],
													['Texas', 'TX'],
													['Utah', 'UT'],
													['Vermont', 'VT'],
													['Virginia', 'VA'],
													['Washington', 'WA'],
													['West Virginia', 'WV'],
													['Wisconsin', 'WI'],
													['Wyoming', 'WY']] %>
													<% if current_user.country == 'CA' %>
														<%= text_field_tag :state_input, current_user.state, class: 'form-control', placeholder: 'State', style: 'display:none' %>
														<%= select_tag :province, options_for_select(provinces, current_user.state), class: 'form-control', placeholder: 'Province' %>
														<%= select_tag :state, options_for_select(states, current_user.state), class: 'form-control', placeholder: 'State', style: 'display:none' %>
													<% elsif current_user.country == 'US' %>
														<%= text_field_tag :state_input, current_user.state, class: 'form-control', placeholder: 'State', style: 'display:none' %>
														<%= select_tag :province, options_for_select(provinces, current_user.state), class: 'form-control', placeholder: 'Province', style: 'display:none' %>
														<%= select_tag :state, options_for_select(states, current_user.state), class: 'form-control', placeholder: 'State' %>
													<% else %>
														<%= text_field_tag :state_input, current_user.state, class: 'form-control', placeholder: 'State' %>
														<%= select_tag :province, options_for_select(provinces, current_user.state), class: 'form-control', placeholder: 'Province', style: 'display:none' %>
														<%= select_tag :state, options_for_select(states, current_user.state), class: 'form-control', placeholder: 'State', style: 'display:none' %>
													<% end %>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-6">
												<div class="form-group">
													<label>Postcode / Zip Code</label>
													<%= text_field_tag :zip, current_user.zip, class: 'form-control' %>
												</div>
											</div>
											<div class="col-sm-6">
												<div class="form-group">
													<label>Country</label>
													<%= country_select('', '', {priority_countries: ['US','CA'], selected: current_user.country}, { class: 'form-control input-md', name: 'country', id: 'country' }) %>
												</div>
											</div>
										</div>
									</div>
									<div class="col-sm-6">
										<div class='form-group'>
											<label>Timezone</label>
											<% map = ActiveSupport::TimeZone.all %>
											<% array = Array.new %>
											<% map.each do |tz| %>
												<% array.push(tz.to_s) %>
											<% end %>

											<% tz_options = [['Select A Timezone',nil]] %>

											<% array.each do |tz_s| %>
												<% tz_s.slice!(0..11) %>
												<% tz_options.push(tz_s) unless tz_s.nil? %>
											<% end %>
											<%= select_tag :timezone, options_for_select(tz_options, current_user.timezone), class: 'form-control' %>
										</div>
										<div class='form-group'>
											<label>Paperless Billing?</label>
											<%= select_tag :paperless_billing, options_for_select([['On',true],['Off',false]], current_user.paperless_billing), class: 'form-control' %>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class='panel-footer text-right'>
							<%= submit_tag 'Update Account', class: 'btn btn-primary', data: {disable_with: 'Updating...'} %>
						</div>
                    </div>
					<% end %>
                </div>
            </div>
		</div>
	</div>
</div>
<script>
	$('#profile').addClass('active')
</script>
<script>
$('#country').change(function(){
	if ($(this).val() == 'CA'){
		$('#province').show()
		$('#state').hide()
		$('#state_input').hide()
	}
	else if ($(this).val() == 'US'){
		$('#province').hide()
		$('#state').show()
		$('#state_input').hide()
	}
	else {
		$('#province').hide()
		$('#state').hide()
		$('#state_input').show()
	}
})

</script>
