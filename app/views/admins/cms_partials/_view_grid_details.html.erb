<%
@parent_grid = @grid.clone
@child_grids = Grid.where(grid_id: @parent_grid.id).order(weight: :desc)
if @parent_grid.class_type == 'Show'
    items = Show.where(grid_id: @parent_grid.id)
elsif @parent_grid.class_type == 'Channel'
    items = Channel.where(grid_id: @parent_grid.id)
elsif @parent_grid.class_type == 'Movie'
    items = Movie.where(grid_id: @parent_grid.id)
end
%>
<div class='panel panel-default'>
    <div class='panel-heading' style='position:relative'>
        <h3 class='panel-title'>Content on this grid</h3>
        <div class='upload_image_heading'>

        </div>
    </div>
    <div class='panel-body'>
        <div class='row'>
        <% @child_grids.each do |grid| %>
            <div class=' col-lg-2 col-sm-3 col-xs-6'>
                <div class='movie_wrapper'>
                    <div class='image_wrapper'>
                        <%= image_tag grid.image_url %>
                    </div>
                    <div class='title_wrapper'>
                        <%= link_to grid.name, admin_view_grid_path(id: grid) %>
                    </div>
                </div>
            </div>
        <% end %>
        <% items.each do |item| %>
            <div class=' col-lg-2 col-sm-3 col-xs-6'>
                <div class='movie_wrapper'>
                    <div class='image_wrapper'>
                        <%= image_tag item.image_url %>
                    </div>
                    <div class='title_wrapper'>
                        <% if item.is_a? Channel %>
                            <%= link_to item.name, live_channels_path(id: item.id) %>
                        <% elsif item.is_a? Show %>
                            <%= link_to item.name, tv_shows_path(id: item.id) %>
                        <% elsif item.is_a? Movie %>
                            <%= link_to item.name, movies_path(id: item.id) %>
                        <% end %>
                    </div>
                </div>
            </div>
        <% end %>
        </div>
    </div>
</div>
