<div class='container'>
	<div class='row'>
		<div class='col-xs-12'>
			<div class='panel panel-default'>
				<div class='panel-heading'>
					<h3 class='panel-title'>My Transactions</h3>
				</div>
				<div class='panel-body'>
					<table class='table table-bordered table-hover'>
						<thead><tr>
							<th>Date</th>
							<th>Amount</th>
							<th>Commission</th>
							<th>Plan</th>
							<th>Status</th>
						</tr></thead>
						<% @transactions.each do |transaction| %>
							<% if transaction.payment_status == 'Pending' %>
								<tr class='warning'>
							<% elsif transaction.payment_status == 'Cancelled' %>
								<tr class='danger'>
							<% elsif transaction.payment_status == 'Paid' %>
								<tr class='success'>
							<% end %>
									<% details = YAML.load(transaction.product_details) %>
									<th><%= transaction.created_at.strftime('%B %-d, %Y') %></th>
									<td>$<%= number_with_precision(details[:price], precision: 2) %></td>
									<td>$<%= number_with_precision((details[:commission_rate]/100)*details[:price], precision: 2) %> <strong>(<%= details[:commission_rate]%>%)</strong></td>
									<td><%= details[:plan] %> (<%= pluralize(details[:duration], 'month') %>)</td>
									<td><strong><%= transaction.payment_status %></strong></td>
								</tr>
						<% end %>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	$('#transactions_link').addClass('active')
</script>